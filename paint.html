<!doctype html>
<html>
    <head>
        <title>Paint App</title>
        <style>
            .app {
                display: flex;
                flex: 1;
                flex-direction: column;
            }
            
            .tool-panel {
                display: flex;
                flex: 1;
                flex-direction: column;
                flex-wrap: wrap;
                align-items: center;
                justify-content: space-evenly;
                background-color: gray;
                padding-top: 5px;
            }
            
            label {
                height: 35px;
            }
            
            .main-grid {
                display: flex;
                flex: 1;
                /* width: 100%;
                height: 100%; */
            }
            
            .main-grid > div[class="left-side-bar"] {
                width: 5vw;
                background-color: gray;
            }
            
            .main-grid > div[class="right-side-bar"] {
                width: 5vw;
                background-color: gray;
            }
            
            #canvas {
                display: flex;
                flex: 1;
                width: 100vw;
                height: 90vh;
                background: url("src/assets/8bitbg.png") repeat;
            }
            
            [type=radio] {
                position: absolute;
                width: 0;
                height: 0;
                opacity: 0;
            }
            
            [type=radio] + img {
                background-color:rgb(255, 255, 255, 0.5);
                border-radius: 90%;
            }
            
            [type=radio]:checked + img {
                background-color: white;
                border-radius: 90%;
            }
        </style>

        <script>
            
            document.addEventListener("DOMContentLoaded", (event) => {
                function draw(event) {
                    context.fillRect(event.clientX - rect.left, event.clientY - rect.top, 50, 50);
                }
                const canvas = document.getElementById("canvas");
                canvas.width = canvas.clientWidth;
                canvas.height = canvas.clientHeight;
                let context = canvas.getContext('2d');
                var rect = canvas.getBoundingClientRect();
                
                canvas.addEventListener('mousedown', event => {
                    // context.strokeStyle = 'blue';
                    // context.lineWidth = 2;
                    // context.beginPath();
                    // context.moveTo(event.clientX - rect.left, event.clientY - rect.top); 
                    context.fillStyle = 'green';
                    canvas.addEventListener('mousemove', draw);
                });
                // console.log("removed draw listener");
                canvas.addEventListener('mouseup', (event) =>{
                    canvas.removeEventListener('mousemove', draw);
                });
            });
            
        </script>
    </head>
    <body>
        <div class="app">
            <div class="main-grid">
                <div class="left-side-bar"></div>
                <canvas id="canvas"></canvas>
                <div class="right-side-bar"></div>
            </div>
            <div class="tool-panel">
                <label>
                    <input type="radio" name="painttools"/>
                    <img src='src/assets/pencil.png' alt='pencil'/>
                </label>
                <label>
                    <input type="radio" name="painttools"/>
                    <img src='src/assets/eraser.png' alt='eraser'/>
                </label>
            </div>
        </div>
    </body>
</html>